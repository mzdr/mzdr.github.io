/*! Orientation.js 1.0.0
 *
 * Sebastian Prein
 * Copyright 2014, MIT License
 */
(function(){var h;h=(typeof exports==="object")?exports:this;h.Orientation||(h.Orientation={});var j=!!document.querySelector&&!!h.addEventListener;var f=("ontouchstart" in window);var e={debug:false};var i={items:{},modifiers:{gone:"is-gone",there:"is-there",upcoming:"is-upcoming"}};var d;Orientation.init=function(k){Orientation.version="1.0.0";d=e;if(k!==undefined&&k!==null&&typeof k==="object"){Object.keys(k).forEach(function(m){if(d[m]!==undefined){d[m]=k[m]}})}if(!j){return c("Browser has no support for 'querySelector' or 'addEventListener'.")}c("User settings loaded.");c("Loading DOM elements.");try{b()}catch(l){return c(l.message)}if(f){document.querySelector(":root").className+="is-touch"}a()};function c(k){if(!d.debug||(!window.console||!console.debug)){return}console.debug("[Orientation] "+(typeof k==="string"?k:JSON.stringify(k)))}function b(){var l=document.querySelectorAll("[data-orjs-target]");for(var m=0;m<l.length;m++){var n=document.querySelector(l[m].getAttribute("data-orjs-target")),k=l[m].getAttribute("data-orjs-container")?l[m].getAttribute("data-orjs-container"):"window";if(!n){continue}if(i.items[k]===undefined){i.items[k]=[]}i.items[k].push({source:l[m],target:n})}return i.items}function g(m,o){var n=o[o.scrollY?"scrollY":"scrollTop"]|0,t=o[o.offsetHeight?"offsetHeight":"innerHeight"],p=o.offsetTop|0;for(var q=0;q<i.items[m].length;q++){var r=i.items[m][q].target,l=i.items[m][q].source,s=r.offsetTop-p;if(n>s+r.offsetHeight){l.setAttribute("data-orjs-status",i.modifiers.gone);l.setAttribute("data-orjs-progress",100);if(l.getAttribute("data-orjs-style")){l.style[l.getAttribute("data-orjs-style")]=100+"%"}continue}if(n<s-t){l.setAttribute("data-orjs-status",i.modifiers.upcoming);l.setAttribute("data-orjs-progress",0);if(l.getAttribute("data-orjs-style")){l.style[l.getAttribute("data-orjs-style")]=0+"%"}continue}var k=Math.min(n-(s-t),r.offsetHeight)/r.offsetHeight*100;l.setAttribute("data-orjs-status",i.modifiers.there);l.setAttribute("data-orjs-progress",Math.round(k));if(l.getAttribute("data-orjs-style")){l.style[l.getAttribute("data-orjs-style")]=k+"%"}}}function a(){Object.keys(i.items).forEach(function(k){var l;c("Trying to register scroll event listener to '"+k+"'.");l=k==="window"?window:document.querySelector(k);if(l===null){return c("Container '"+k+"' is undefined.")}window.addEventListener("load",function(){g(k,l)});l.addEventListener("scroll",function(){g(k,l)})})}}).call(this);