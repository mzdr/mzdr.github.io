(function(d){var a,c;(function(){var f,j=["webkit","moz","ms","o"],h;try{d.top.name;h=d.top}catch(g){h=d}a=h.requestAnimationFrame;c=h.cancelAnimationFrame||h.cancelRequestAnimationFrame;for(f=0;f<j.length&&!a;f++){a=h[j[f]+"RequestAnimationFrame"];c=h[j[f]+"CancelAnimationFrame"]||h[j[f]+"CancelRequestAnimationFrame"]}a&&a(function(){b.hasNative=true})})();function b(e){if(!(this instanceof b)){return new b(e)}e||(e={});if(typeof e=="number"){e={frameRate:e}}e.useNative!=null||(e.useNative=true);this.options=e;this.frameRate=e.frameRate||b.FRAME_RATE;this._frameLength=1000/this.frameRate;this._isCustomFrameRate=this.frameRate!==b.FRAME_RATE;this._timeoutId=null;this._callbacks={};this._lastTickTime=0;this._tickCounter=0}b.FRAME_RATE=60;b.shim=function(e){var f=new b(e);d.requestAnimationFrame=function(g){return f.request(g)};d.cancelAnimationFrame=function(g){return f.cancel(g)};return f};b.now=Date.now||function(){return(new Date).getTime()};b.navigationStart=b.now();b.perfNow=function(){if(d.performance&&d.performance.now){return d.performance.now()}return b.now()-b.navigationStart};b.hasNative=false;b.prototype.request=function(g){var e=this,f;++this._tickCounter;if(b.hasNative&&e.options.useNative&&!this._isCustomFrameRate){return a(g)}if(!g){throw new TypeError("Not enough arguments")}if(this._timeoutId==null){f=this._frameLength+this._lastTickTime-b.now();if(f<0){f=0}this._timeoutId=d.setTimeout(function(){var h;e._lastTickTime=b.now();e._timeoutId=null;++e._tickCounter;for(h in e._callbacks){if(e._callbacks[h]){if(b.hasNative&&e.options.useNative){a(e._callbacks[h])}else{e._callbacks[h](b.perfNow())}delete e._callbacks[h]}}},f)}this._callbacks[this._tickCounter]=g;return this._tickCounter};b.prototype.cancel=function(e){if(b.hasNative&&this.options.useNative){c(e)}delete this._callbacks[e]};if(typeof exports=="object"&&typeof module=="object"){module.exports=b}else{if(typeof define=="function"&&define.amd){define(function(){return b})}else{d.AnimationFrame=b}}})(window);
/*! Fluffy.js 1.1.0
 *
 * Sebastian Prein
 * Copyright 2014, MIT License
 */
(function(){var u;u=(typeof exports==="object")?exports:this;u.Fluffy||(u.Fluffy={});var A=!!document.querySelector&&!!u.addEventListener;var n=("ontouchstart" in window);var o={containerSelector:"#fluffy-container",contentSelector:"#fluffy-content",debug:false,itemSelector:null,scrollbarSelector:"#fluffy-scrollbar",showScrollbar:true,smartHeight:false,stageSelector:"#fluffy-stage",triggerSelector:null,triggerDirection:"x",mouseDamp:20,mousePadding:60};var r={container:null,scrollbar:{},stage:null,content:null,items:null};var B;var p={real:{x:0,y:0},fake:{x:0,y:0},last:{x:0,y:0},observer:{start:null,stop:null,status:null,process:{run:false}}};var j={};Fluffy.init=function(D){Fluffy.version="1.1.0";window.AnimationFrame.shim();B=o;if(D!==undefined&&D!==null&&typeof D==="object"){Object.keys(D).forEach(function(F){if(B[F]!==undefined){B[F]=D[F]}})}if(!A){return e("Browser has no support for 'querySelector' or 'addEventListener'.")}B.triggerDirection=B.triggerDirection.toLowerCase();e("User settings loaded.");e("Loading DOM elements.");try{r.container=v();r.trigger=y();r.scrollbar=h();r.stage=i();r.content=C();r.items=a()}catch(E){return e(E.message)}b()};Fluffy.getContentWidth=function(){for(var E=0,D=2;E<r.items.length;E++){D+=r.items[E].offsetWidth}return D};Fluffy.getContentHeight=function(){var F=r.items[0].offsetHeight;var D=0;for(var E=0;E<r.items.length;E++){if(r.items[E].offsetHeight>D){D=r.items[E].offsetHeight}if(r.items[E].offsetHeight<F){F=r.items[E].offsetHeight}}return[F,D]};function e(D){if(!B.debug||(!window.console||!console.debug)){return}console.debug("[Fluffy] "+(typeof D==="string"?D:JSON.stringify(D)))}function m(F,D){if(typeof F.classList==="object"){return F.classList.remove(D)}var E=F.className.split(" ");E.splice(E.indexOf(D),1);F.className=E.join(" ")}function t(E,D){if(typeof E.classList==="object"){return E.classList.add(D)}E.className+=" "+D}function d(F,E){var H=AnimationFrame.now(),G={run:true};function D(){var I=AnimationFrame.now(),J=I-H;if(J>=E&&G.run){F.call();H=AnimationFrame.now()}G.value=window.requestAnimationFrame(D)}G.value=window.requestAnimationFrame(D);return G}function c(D){window.cancelAnimationFrame(D.value);D.run=false}function z(D){for(var E=0;E<D.length;E++){var I=D[E],G=I.nextSibling,H=I.previousSibling,F=I.parentNode;if(I!==null&&I.nodeType===3){F.removeChild(I)}if(H!==null&&H.nodeType===3){F.removeChild(H)}if(G!==null&&G.nodeType===3){F.removeChild(G)}}return D}function v(){r.container=document.querySelector(B.containerSelector);if(r.container===null){throw Error("Container '"+B.containerSelector+"' is undefined.")}return r.container}function y(){r.trigger=(B.triggerSelector===null)?v():document.querySelector(B.triggerSelector);if(r.trigger===null){throw Error("Trigger '"+B.containerSelector+"' is undefined.")}return r.trigger}function i(){r.stage=document.querySelector(B.stageSelector);if(r.stage===null){throw Error("Stage '"+B.stageSelector+"' is undefined.")}return r.stage}function C(){r.content=document.querySelector(B.contentSelector);if(r.content===null){throw Error("Content '"+B.contentSelector+"' is undefined.")}return r.content}function a(){var D=(B.itemSelector!==null)?document.querySelectorAll(B.itemSelector):r.content.childNodes;return r.items=z(D)}function h(){if(!B.showScrollbar){return}e("Creating scrollbars.");var D=document.querySelector(B.scrollbarSelector);if(D===null){throw Error("Scrollbar '"+B.scrollbarSelector+"' is undefined.")}if(B.triggerDirection.indexOf("x")>=0){r.scrollbar.left=document.createElement("span");D.appendChild(r.scrollbar.left);t(r.scrollbar.left,"is-left")}if(B.triggerDirection.indexOf("y")>=0){r.scrollbar.top=document.createElement("span");D.appendChild(r.scrollbar.top);t(r.scrollbar.top,"is-top")}return r.scrollbar}function q(){return r.content.offsetHeight-r.stage.offsetHeight}function l(){return r.content.offsetWidth-r.stage.offsetWidth}function x(G){G=G||window.event;var E=r.trigger.currentStyle||window.getComputedStyle(r.trigger,null),F=r.trigger.getBoundingClientRect(),D={left:parseInt(E.borderLeftWidth,10)||0,right:parseInt(E.borderRightWidth,10)||0,top:parseInt(E.borderTopWidth,10)||0,bottom:parseInt(E.borderBottomWidth,10)||0},H={left:F.left+D.left,right:D.left+D.right,bottom:D.top+D.bottom,top:F.top+D.top};return{x:(B.triggerDirection.indexOf("x")>=0)?Math.min(Math.max(0,G.clientX-H.left),F.width-H.right):0,y:(B.triggerDirection.indexOf("y")>=0)?Math.min(Math.max(0,G.clientY-H.top),F.height-H.bottom):0}}function g(){return{x:(B.triggerDirection.indexOf("x")>=0)?Math.min(Math.max(0,p.real.x-B.mousePadding),p.moveArea.width)*j.moveAreaToContent.width:0,y:(B.triggerDirection.indexOf("y")>=0)?Math.min(Math.max(0,p.real.y-B.mousePadding),p.moveArea.height)*j.moveAreaToContent.height:0}}function k(){e("Updating content container size.");r.content.style.width=Fluffy.getContentWidth()+"px";if(B.triggerDirection.indexOf("y")>=0||B.smartHeight!==false){r.content.style.height=Fluffy.getContentHeight()[(B.smartHeight==="smallest")?0:1]+"px"}}function s(){if(!B.showScrollbar){return}if(B.triggerDirection.indexOf("x")>=0){r.scrollbar.left.style.left=r.stage.scrollLeft/l()*(1-r.scrollbar.left.offsetWidth/r.stage.offsetWidth)*100+"%"}if(B.triggerDirection.indexOf("y")>=0){r.scrollbar.top.style.top=r.stage.scrollTop/q()*(1-r.scrollbar.top.offsetHeight/r.stage.offsetHeight)*100+"%"}}function f(D){if(B.triggerDirection.indexOf("x")>=0){r.stage.scrollLeft=D.x}if(B.triggerDirection.indexOf("y")>=0){r.stage.scrollTop=D.y}}function w(){e("Calculating ratios.");p.moveArea={width:r.trigger.offsetWidth-(B.mousePadding*2),height:r.trigger.offsetHeight-(B.mousePadding*2)};j.moveAreaToContent={width:l()/p.moveArea.width,height:q()/p.moveArea.height}}function b(){if(n){t(r.container,"is-touch")}window.addEventListener("load",function(){if(r.container){m(r.container,"is-loading")}k();if(n){return}if(B.showScrollbar){t(r.container,"has-scrollbar");r.stage.addEventListener("scroll",function(E){s()})}w();e("Registering event listeners.");r.trigger.addEventListener("mousemove",function(E){if(p.observer.status()===false){p.observer.start()}p.real=x(E);p.fake=g()});p.observer.start=function(){e("Starting mouse observer.");t(r.container,"is-moving");p.observer.process=d(function(){var E={x:(p.fake.x-p.last.x)/B.mouseDamp,y:(p.fake.y-p.last.y)/B.mouseDamp};if(p.observer.status()&&Math.abs(E.x)<0.001&&Math.abs(E.y)<0.001){p.observer.stop();m(r.container,"is-moving")}f({x:(p.last.x+=E.x),y:(p.last.y+=E.y)})},10)};p.observer.stop=function(){e("Stopping mouse observer.");c(p.observer.process)};p.observer.status=function(){return p.observer.process.run}});var D;window.addEventListener("resize",function(){if(D){clearTimeout(D)}D=setTimeout(function(){k();w();s()},100)})}}).call(this);