(function(d){var a,c;(function(){var f,j=["webkit","moz","ms","o"],h;try{d.top.name;h=d.top}catch(g){h=d}a=h.requestAnimationFrame;c=h.cancelAnimationFrame||h.cancelRequestAnimationFrame;for(f=0;f<j.length&&!a;f++){a=h[j[f]+"RequestAnimationFrame"];c=h[j[f]+"CancelAnimationFrame"]||h[j[f]+"CancelRequestAnimationFrame"]}a&&a(function(){b.hasNative=true})})();function b(e){if(!(this instanceof b)){return new b(e)}e||(e={});if(typeof e=="number"){e={frameRate:e}}e.useNative!=null||(e.useNative=true);this.options=e;this.frameRate=e.frameRate||b.FRAME_RATE;this._frameLength=1000/this.frameRate;this._isCustomFrameRate=this.frameRate!==b.FRAME_RATE;this._timeoutId=null;this._callbacks={};this._lastTickTime=0;this._tickCounter=0}b.FRAME_RATE=60;b.shim=function(e){var f=new b(e);d.requestAnimationFrame=function(g){return f.request(g)};d.cancelAnimationFrame=function(g){return f.cancel(g)};return f};b.now=Date.now||function(){return(new Date).getTime()};b.navigationStart=b.now();b.perfNow=function(){if(d.performance&&d.performance.now){return d.performance.now()}return b.now()-b.navigationStart};b.hasNative=false;b.prototype.request=function(g){var e=this,f;++this._tickCounter;if(b.hasNative&&e.options.useNative&&!this._isCustomFrameRate){return a(g)}if(!g){throw new TypeError("Not enough arguments")}if(this._timeoutId==null){f=this._frameLength+this._lastTickTime-b.now();if(f<0){f=0}this._timeoutId=d.setTimeout(function(){var h;e._lastTickTime=b.now();e._timeoutId=null;++e._tickCounter;for(h in e._callbacks){if(e._callbacks[h]){if(b.hasNative&&e.options.useNative){a(e._callbacks[h])}else{e._callbacks[h](b.perfNow())}delete e._callbacks[h]}}},f)}this._callbacks[this._tickCounter]=g;return this._tickCounter};b.prototype.cancel=function(e){if(b.hasNative&&this.options.useNative){c(e)}delete this._callbacks[e]};if(typeof exports=="object"&&typeof module=="object"){module.exports=b}else{if(typeof define=="function"&&define.amd){define(function(){return b})}else{d.AnimationFrame=b}}})(window);
/*! Fluffy.js 1.0.0
 *
 * Sebastian Prein
 * Copyright 2014, MIT License
 */
(function(){var t;t=(typeof exports==="object")?exports:this;t.Fluffy||(t.Fluffy={});var w=!!document.querySelector&&!!t.addEventListener;var l=("ontouchstart" in window);var m={containerSelector:"#fluffy-container",contentSelector:"#fluffy-content",debug:false,itemSelector:null,scrollbarSelector:"#fluffy-scrollbar",showScrollbar:true,smartHeight:null,stageSelector:"#fluffy-stage",triggerSelector:null};var q={container:null,scrollbar:null,stage:null,content:null,items:null};var x;var p={last:0,real:0,fake:0,padding:60,damp:20,moveArea:0,fidderenceRatio:0,observer:null};var c={widthRatio:0};Fluffy.init=function(z){Fluffy.version="1.0.0";x=m;if(z!==undefined&&z!==null&&typeof z==="object"){Object.keys(z).forEach(function(A){if(x[A]!==undefined){x[A]=z[A]}})}if(!w){return f("Browser has no support for 'querySelector' or 'addEventListener'.")}q.container=u();q.scrollbar=g();q.stage=h();q.content=y();q.items=a();b()};Fluffy.getContentWidth=function(){for(var A=0,z=0;A<q.items.length;A++){z+=q.items[A].offsetWidth}return z};Fluffy.getContentHeight=function(){var B=q.items[0].offsetHeight;var z=0;for(var A=0;A<q.items.length;A++){if(q.items[A].offsetHeight>z){z=q.items[A].offsetHeight}if(q.items[A].offsetHeight<B){B=q.items[A].offsetHeight}}return[B,z]};function f(z){if(!x.debug||(!window.console||!console.debug)){return}console.debug("Fluffy: "+z)}function k(B,z){if(typeof B.classList==="object"){return B.classList.remove(z)}var A=B.className.split(" ");A.splice(A.indexOf(z),1);B.className=A.join(" ")}function s(A,z){if(typeof A.classList==="object"){return A.classList.add(z)}A.className+=" "+z}function r(z){return z.matches||z.webkitMatchesSelector||z.mozMatchesSelector||z.msMatchesSelector||z.oMatchesSelector}function e(B,A){if(!window.requestAnimationFrame){return window.setInterval(B,A)}var D=AnimationFrame.now(),C=new Object();function z(){var E=AnimationFrame.now(),F=E-D;if(F>=A){B.call();D=AnimationFrame.now()}C.value=requestAnimationFrame(z)}C.value=requestAnimationFrame(z);return C}function d(z){window.cancelAnimationFrame?window.cancelAnimationFrame(z.value):clearInterval(z)}function n(z){for(var A=0;A<z.length;A++){if(z[A].nodeType===3){z[A].parentNode.removeChild(z[A])}}return z}function u(){q.container=document.querySelector(x.containerSelector);if(q.container===null){f("Container '"+x.containerSelector+"' not found.")}return q.container}function h(){q.stage=document.querySelector(x.stageSelector);if(q.stage===null){f("Stage '"+x.stageSelector+"' not found.")}return q.stage}function y(){q.content=document.querySelector(x.contentSelector);if(q.content===null){f("Content '"+x.contentSelector+"' not found.")}return q.content}function a(){return q.items=n((x.itemSelector!==null)?document.querySelector(x.itemSelector):q.content.childNodes)}function g(){q.scrollbar=document.querySelector(x.scrollbarSelector);if(q.scrollbar===null){f("scrollbar '"+x.scrollbarSelector+"' not found.")}return q.scrollbar}function j(){return q.content.offsetWidth-q.stage.offsetWidth}function i(){return(q.stage.scrollLeft/j()*(100-(q.scrollbar.offsetWidth/q.stage.offsetWidth*100)))+"%"}function v(z){z-=q.container.offsetLeft-q.stage.offsetLeft;return Math.min(Math.max(0,z),q.container.offsetWidth)}function o(){c.widthRatio=(q.content.offsetWidth/q.stage.offsetWidth)-1;p.moveArea=q.stage.offsetWidth-(p.padding*2);p.fidderenceRatio=(q.stage.offsetWidth/p.moveArea)}function b(){if(x.showScrollbar&&!l){s(q.container,"has-scrollbar");q.stage.addEventListener("scroll",function(z){q.scrollbar.style.left=i()})}if(l){s(q.container,"is-touch")}window.onload=function(){if(q.container){k(q.container,"is-loading")}q.content.style.width=Fluffy.getContentWidth()+"px";if(x.smartHeight!==null){q.container.style.height="auto";q.stage.style.height=Fluffy.getContentHeight()[(x.smartHeight==="smallest")?0:1]+"px"}if(l){return}o();q.stage.addEventListener("mousemove",function(z){p.real=v(z.pageX);p.fake=Math.floor(Math.min(Math.max(0,p.real-p.padding),p.moveArea)*p.fidderenceRatio)});p.observer=e(function(){p.last+=(p.fake-p.last)/p.damp;q.stage.scrollLeft=p.last*c.widthRatio},10)};window.onresize=function(){o();q.content.style.width=Fluffy.getContentWidth()+"px";if(x.showScrollbar){q.scrollbar.style.left=i()}}}}).call(this);
